+++
title = "Wgpu: getting started"
date = 2021-01-06
+++

## Vertex buffer descriptor

A vertex buffer descriptor describes how the gpu interprets a vertex buffer, a
struct defined by you.

```
 - stride -    - stride -
|x|y|z|r|g|b| |x|y|z|r|g|b
```

`stride`: is the number of bytes to move from one vertex to another: 
I.e if vertices are 4 bytes in size, and placed contiguously in memory then `stride = 4`.

`step_mode`: we default to `stepmode::Vertex` as this means move one vertex at a time.

`attributes`: is a slice of `VertexAttributeDescriptor` that contains 
information about the fields of the struct. For instance: colour and position.

Example: 

```rust
#[repre(C)] // repr(C) here so the compiler doesn't reorder the fields
type Position = [f32; 3];
struct Vertex {
    position: Position,
    color: [f32; 3],
}

impl Vertex {
    fn attributes() -> &[VertexAttributeDescriptor] {
        &[
            VertexAttributeDescriptor {
                offset: 0, // offset for position is zero as it's the first field
                shader_location: 0, // location of the field in the shader, not on the struct
                format: wgpu::VertexFormat::Float3,
            },
            VertexAttributeDescriptor {
                offset: size_of::<Position>(), // colour comes after position
                shader_location: 1,
                format: wgpu::VertexFormat::Float3,
            },
        ]
    }
}
```



> Right, the graphics API needs to know how the data in the vertex buffer laid out. Such has "how many bytes do a need to move to go from one vertex to the next", or "how many bytes the first element of a vertex takes up and what type should I read it as"
